# FHIR Gateway Configuration
# Copy this file to .env and customize as needed

# =============================================================================
# Server Settings
# =============================================================================
FHIR_GATEWAY_HOST=0.0.0.0
FHIR_GATEWAY_PORT=8000
# Set to true for development (allows default session secret)
FHIR_GATEWAY_DEBUG=true
# Public URL for MCP connection instructions on landing page
FHIR_GATEWAY_PUBLIC_URL=http://localhost:8000

# =============================================================================
# Logging
# =============================================================================
FHIR_GATEWAY_LOG_LEVEL=INFO
FHIR_GATEWAY_LOG_JSON=true

# =============================================================================
# Session Settings
# =============================================================================
FHIR_GATEWAY_SESSION_COOKIE_NAME=fhir_gateway_session
FHIR_GATEWAY_SESSION_MAX_AGE=3600
# Set to false for local development over HTTP
FHIR_GATEWAY_SESSION_COOKIE_SECURE=true

# =============================================================================
# OAuth Settings
# =============================================================================
FHIR_GATEWAY_OAUTH_REDIRECT_URI=http://localhost:8000/oauth/callback

# =============================================================================
# CORS Settings
# =============================================================================
# For development: use wildcard without credentials, or specific origins with credentials
# CANNOT use * with allow_credentials=true (browser security restriction)
FHIR_GATEWAY_CORS_ORIGINS=http://localhost:3000,http://localhost:8080
FHIR_GATEWAY_CORS_ALLOW_CREDENTIALS=true
# Alternative for public API without credentials:
# FHIR_GATEWAY_CORS_ORIGINS=*
# FHIR_GATEWAY_CORS_ALLOW_CREDENTIALS=false

# =============================================================================
# Redis Settings (optional - for production token storage)
# =============================================================================
# Use redis:// for unencrypted or rediss:// for TLS
# FHIR_GATEWAY_REDIS_URL=rediss://localhost:6379/0
# FHIR_GATEWAY_REQUIRE_REDIS_TLS=false

# =============================================================================
# Encryption Settings (optional - for encrypting tokens at rest)
# =============================================================================
# Set a strong master key for production
# FHIR_GATEWAY_MASTER_KEY=your-secure-master-key-here

# =============================================================================
# Rate Limiting
# =============================================================================
FHIR_GATEWAY_RATE_LIMIT_MAX=100
FHIR_GATEWAY_RATE_LIMIT_WINDOW=60
FHIR_GATEWAY_CALLBACK_RATE_LIMIT_MAX=20
FHIR_GATEWAY_CALLBACK_RATE_LIMIT_WINDOW=60

# =============================================================================
# Request Settings
# =============================================================================
FHIR_GATEWAY_REQUEST_TIMEOUT=30
FHIR_GATEWAY_MAX_REQUEST_BODY_SIZE=10485760

# =============================================================================
# Token/Auth Settings
# =============================================================================
FHIR_GATEWAY_TOKEN_REFRESH_BUFFER_SECONDS=60
FHIR_GATEWAY_REFRESH_LOCK_TTL_SECONDS=30
FHIR_GATEWAY_AUTH_WAIT_TIMEOUT_SECONDS=300

# =============================================================================
# Platform OAuth Credentials
# Set credentials for each platform you want to use
# Format: FHIR_GATEWAY_PLATFORM_{PLATFORM_ID}_CLIENT_ID
#         FHIR_GATEWAY_PLATFORM_{PLATFORM_ID}_CLIENT_SECRET
# Platform ID is uppercased with hyphens converted to underscores
# =============================================================================
# FHIR_GATEWAY_PLATFORM_AETNA_CLIENT_ID=your-client-id
# FHIR_GATEWAY_PLATFORM_AETNA_CLIENT_SECRET=your-client-secret
# FHIR_GATEWAY_PLATFORM_AETNA_SANDBOX_CLIENT_ID=your-client-id
# FHIR_GATEWAY_PLATFORM_AETNA_SANDBOX_CLIENT_SECRET=your-client-secret
